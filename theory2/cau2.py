def xor_encode_file(file_path, key):
    # Read the contents of the file into a buffer
    with open(file_path, 'rb') as file:
        buffer = bytearray(file.read())

    key_length = len(key)
    key_index = 0

    # Perform XOR encryption on each byte in the buffer
    for i in range(len(buffer)):
        buffer[i] ^= key[key_index]
        key_index = (key_index + 1) % key_length

    # Write the encoded buffer back to the file
    with open(file_path, 'wb') as file:
        file.write(buffer)


def xor_decode_file(file_path, key):
    # Read the contents of the file into a buffer
    with open(file_path, 'rb') as file:
        buffer = bytearray(file.read())

    key_length = len(key)
    key_index = 0

    # Perform XOR decryption on each byte in the buffer
    for i in range(len(buffer)):
        buffer[i] ^= key[key_index]
        key_index = (key_index + 1) % key_length

    # Write the decoded buffer back to the file
    with open(file_path, 'wb') as file:
        file.write(buffer)


# Example usage
file_path = './putty.exe'
encryption_key = b'MySecretKey'

# Encode (encrypt) the file
xor_encode_file(file_path, encryption_key)

# Decode (decrypt) the file
xor_decode_file(file_path, encryption_key)
